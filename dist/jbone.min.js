/*!
 * jBone v0.0.7 - 2013-11-11 - Library for DOM manipulation
 *
 * https://github.com/kupriyanenko/jbone
 *
 * Copyright 2013 Alexey Kupriyanenko
 * Released under the MIT license.
 */

!function(a,b){function c(a,b){return this instanceof c?d.call(this,a,b):new c(a,b)}function d(a,b){var d;return a instanceof c?a:(Array.isArray(a)?d=a.map(function(a){return e(a,b)}):a&&(d=e(a,b)),d=Array.isArray(d)?d:[d],c.fn.merge(this,d),b&&c.fn.attr.call(this,b),this)}function e(a){var b,c,d;return"string"==typeof a&&(b=f.exec(a))?document.createElement(b[1]):"string"==typeof a&&(c=a.match(g))&&c[1]?(d=document.createElement("div"),d.innerHTML=a,[].slice.call(d.childNodes)):"string"==typeof a?[].slice.call(document.querySelectorAll(a)):a}b["true"]=a;var f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;c.setId=function(a){var b=a.jid||void 0;a===window?b="window":a.jid||(b=++c._cache.jid,a.jid=b),c._cache.events[b]||(c._cache.events[b]={})},c.getData=function(a){a=a instanceof c?a[0]:a;var b=a===window?"window":a.jid;return{jid:b,events:c._cache.events[b]}},c._cache={events:{},jid:0},c.fn=c.prototype=[],b.jBone=b.$=c,c.fn.on=function(){var a,b,d,e,f,g=arguments[0];return 2===arguments.length?a=arguments[1]:(b=arguments[1],a=arguments[2]),this.forEach(function(h){c.setId(h),f=c.getData(h).events,d=g.split(".")[1],g=g.split(".")[0],f[g]=f[g]?f[g]:[],e=function(e){e.namespace&&e.namespace!==d||(b?~c(h).find(b).indexOf(e.target)&&a.call(h,e):a.call(h,e))},f[g].push({namespace:d,fn:e,originfn:a}),h.addEventListener&&h.addEventListener(g,e,!1)}),this},c.fn.one=function(){var a,b,c,d=arguments[0],e=this;return 2===arguments.length?a=arguments[1]:(b=arguments[1],a=arguments[2]),c=function(b){a.call(this,b),e.off(d,c)},2===arguments.length?this.on(d,c):this.on(d,b,c),this},c.fn.trigger=function(a,b){if(!a||!a.split(".")[0])return this;var d,e=a.split(".")[1];return a=a.split(".")[0],"CustomEvent"in window?(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!0,!0,null)):(d=document.createEvent("Event"),d.initEvent(a,!0,!0)),d.namespace=e,this.forEach(function(e){e.dispatchEvent?e.dispatchEvent(d):c.getData(e).events[a]&&c.getData(e).events[a].forEach(function(a){a.fn.call(e,b)})}),this},c.fn.off=function(a,b){var d,e,f=a.split(".")[1],g=function(a){return b&&a.originfn===b?a.fn:b?void 0:a.fn};return a=a.split(".")[0],this.forEach(function(b){d=c.getData(b).events,d&&d[a]?d[a].forEach(function(c){e=g(c),f?c.namespace===f&&b.removeEventListener(a,e):f||b.removeEventListener(a,e)}):f&&Object.keys(d).forEach(function(a){d[a].forEach(function(c){e=g(c),c.namespace===f&&b.removeEventListener(a,e)})})}),this},c.fn.is=function(){var a=arguments;return this.some(function(b){return b.tagName.toLowerCase()===a[0]})},c.fn.has=function(){var a=arguments;return this.some(function(b){return b.querySelectorAll(a[0]).length})},c.fn.merge=function(a,b){var c=b.length,d=a.length,e=0;if("number"==typeof c)for(;c>e;)a[d++]=b[e],e++;else for(;void 0!==b[e];)a[d++]=b[e++];return a.length=d,a},c.fn.attr=function(){var a=arguments;return"string"==typeof a[0]&&1===a.length?this[0].getAttribute(a[0]):("string"==typeof a[0]&&a.length>1?this.forEach(function(b){b.setAttribute(a[0],a[1])}):a[0]instanceof Object&&this.forEach(function(b){Object.keys(a[0]).forEach(function(c){b.setAttribute(c,a[0][c])})}),this)},c.fn.val=function(){var a=arguments;if("string"==typeof a[0])this.forEach(function(b){b.value=a[0]});else if(void 0===a[0])return this[0].value;return this},c.fn.css=function(){var a=arguments;return"string"==typeof a[0]&&2===a.length?this.forEach(function(b){b.style[a[0]]=a[1]}):a[0]instanceof Object&&this.forEach(function(b){Object.keys(a[0]).forEach(function(c){b.style[c]=a[0][c]})}),this},c.fn.find=function(a){var b=[];return this.forEach(function(c){[].forEach.call(c.querySelectorAll(a),function(a){b.push(a)})}),c(b)},c.fn.get=function(a){return this[a]},c.fn.eq=function(a){return c(this[a])},c.fn.html=function(){var a,b=arguments[0];return void 0!==b?(this.empty.call(this),this.append.call(this,b),this):(a=[],this.forEach(function(b){b instanceof HTMLElement&&a.push(b.innerHTML)}),a.length?a.join(""):null)},c.fn.append=function(a){return"string"==typeof a&&(a=c(a)),a instanceof c?this.forEach(function(b,c){a.forEach(function(a){c?b.appendChild(a.cloneNode()):b.appendChild(a)})}):(a instanceof HTMLElement||a instanceof DocumentFragment)&&this.forEach(function(b){b.appendChild(a)}),this},c.fn.appendTo=function(a){return c(a).append(this),this},c.fn.empty=function(){return this.forEach(function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}),this},c.fn.remove=function(){return this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),this}}({},function(){return this}());